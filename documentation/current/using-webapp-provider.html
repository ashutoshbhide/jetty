<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Using the WebApp Provider</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="keywords" content="jetty, servlet-api, cometd, http, spdy, eclipse, maven, java, software"><link rel="home" href="index.html" title="Jetty : The Definitive Reference (test)"><link rel="up" href="deploying.html" title="Chapter&nbsp;4.&nbsp;Deploying Jetty"><link rel="prev" href="using-context-provider.html" title="Using the Context Provider"><link rel="next" href="session-management.html" title="Chapter&nbsp;5.&nbsp;Session Management"><link xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" rel="shortcut icon" href="images/favicon.ico"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><center xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-logo.svg" width="80"></a></center><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Using the WebApp Provider</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-context-provider.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;4.&nbsp;Deploying Jetty</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="session-management.html">Next</a></td></tr></table><hr></div><div xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-variant: small-caps; font-weight: bold"><a href="http://www.webtide.com/support.jsp" style="text-decoration:none">Contact the core Jetty developers at
          <span style="color:#fd360b"> www.webtide.com</span></a></span><br><span style="font-style:oblique;font-size: 80%">
 private support for your internal/customer projects ... custom extensions and distributions ... versioned snapshots for indefinite support ...
 scalability guidance for your apps and Ajax/Comet projects ... development services from 1 day to full product delivery
    </span></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-webapp-provider"></a>Using the WebApp Provider</h2></div></div></div><p>The <a class="link" href="http://download.eclipse.org/jetty/stable-7/apidocsindex.html?org/eclipse/jetty/deploy/providers/WebAppProvider.html" target="_top">
    <code class="code">WebApp Provider</code>
  </a> is for static deployment of standard WAR files and webapps with little or no Jetty-specific customization.
  For hot deployment of customized contexts, use the <a class="link" href="http://download.eclipse.org/jetty/stable-7/apidocsindex.html?org/eclipse/jetty/deploy/providers/ContextProvider.html" target="_top"><code class="code">
  ContextProvider</code>.</a></p><p>The basic operation of the <code class="code">WebAppProvider</code> is to scan a directory at startup for WAR files or
  webapp directories and to deploy the web applications found. Typically this is done from a <code class="filename">
  jetty.xml</code> style file; in the jetty distribution the name of this file is <code class="filename">
  jetty-webapps.xml</code>:</p><div class="informalexample"><pre class="programlisting">
 
 <strong class="hl-tag" style="color: #000096">&lt;Configure</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"Server"</span> <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.Server"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;Ref</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"DeploymentManager"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
          <strong class="hl-tag" style="color: #000096">&lt;Call</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"webappprovider"</span> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"addAppProvider"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
            <strong class="hl-tag" style="color: #000096">&lt;Arg&gt;</strong>
              <strong class="hl-tag" style="color: #000096">&lt;New</strong> <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.deploy.providers.WebAppProvider"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
                <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"monitoredDirName"</span><strong class="hl-tag" style="color: #000096">&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;Property</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"jetty.home"</span> <span class="hl-attribute" style="color: #F5844C">default</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>/webapps<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong>
                <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"defaultsDescriptor"</span><strong class="hl-tag" style="color: #000096">&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;Property</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"jetty.home"</span> <span class="hl-attribute" style="color: #F5844C">default</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>/etc/webdefault.xml<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong>
                <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"scanInterval"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>1<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong>
                <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"contextXmlDir"</span><strong class="hl-tag" style="color: #000096">&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;Property</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"jetty.home"</span> <span class="hl-attribute" style="color: #F5844C">default</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>/contexts<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong>
                <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"extractWars"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>true<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong>
              <strong class="hl-tag" style="color: #000096">&lt;/New&gt;</strong>
            <strong class="hl-tag" style="color: #000096">&lt;/Arg&gt;</strong>
          <strong class="hl-tag" style="color: #000096">&lt;/Call&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/Ref&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/Configure&gt;</strong>

    </pre></div><p>This works as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The <code class="code">WebAppProvider</code> is added to the server as a <span class="emphasis"><em>LifeCycle</em></span>. This simply
      means that the deployer starts and stops with the server, that is, when <code class="code">server.start()</code> is called,
      <code class="code">start</code> is also called on the deployer</p></li><li class="listitem"><p>The <span class="emphasis"><em>context</em></span> passed in is a reference to a <code class="code">HandlerContainer</code> in which the
      discovered webapps are deployed. This is normally an instance of <a class="link" href="http://download.eclipse.org/jetty/stable-7/apidocsindex.html?org/eclipse/jetty/server/handler/ContextHandlerCollection.html" target="_top">
      ContextHandlerCollection</a>.</p></li><li class="listitem"><p>The <code class="code">contextXmlDir</code> points to a directory like the one the <code class="code">ContextProvider</code> uses.
      When you use this option the <code class="code">WebappProvider</code> checks any webapp or WAR files in the monitored
      directory for an associated context file. If it finds one, it defers to the <code class="code">ContextProvider</code> to
      deploy the webapp. If it does not find a context file, the <code class="code">WebAppProvider</code> deploys the webapp.</p></li><li class="listitem"><p>The <code class="code">monitoredDirName</code> is a file path or URL to the directory to scan for web applications. Zip
      files ending with <code class="filename">.war</code> or <code class="filename">.zip</code> are deployed. Directories not called CVS
      are also deployed. The basename of the WAR (for example, <span class="emphasis"><em>foo</em></span> from <code class="filename">
      foo.war</code>) or the directory name are used as the context path of the discovered webapps, unless the name
      is <span class="emphasis"><em>root</em></span>, in which case the context path of / is used.</p></li><li class="listitem"><p>The <code class="code">parentLoaderPriority</code> parameter is a boolean that selects whether the standard Java parent
      first delegation [[Jetty/Reference/Jetty_Classloading|classloading]] // TODO URL xref / /is used or the servlet
      specification webapp classloading priority.</p></li><li class="listitem"><p>If the <span class="emphasis"><em>extract</em></span> parameter is true, any packed WAR or zip files are first extracted to a
      [[Jetty/Reference/Temporary_Directories|temporary directory]] //TODO xref// before being deployed. This is
      advisable if there are uncompiled JSPs in the web apps.</p></li><li class="listitem"><p>If the <span class="emphasis"><em>allowDuplicates</em></span> parameter is false, the discovered webapps are checked against
      existing deployed webapps and are not deployed if the same context path or WAR file is already deployed (perhaps
      by another deployer).</p></li><li class="listitem"><p>The <span class="emphasis"><em>defaultsDescriptor</em></span> parameter allows you to set an alternative <code class="filename">
      webdefault.xml</code> config file on the discovered web applications. The <code class="code">webdefault.xml</code> file
      controls the configuration of the JSP and Default servlets.</p></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-context-provider.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="deploying.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="session-management.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Using the Context Provider&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;5.&nbsp;Session Management</td></tr></table></div><div xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-style:oblique;font-size: 80%">
See an error or something missing?<br></span><span style="font-variant: small-caps; font-weight: bold"><a href="http://github.com/jetty-project/jetty-documentation" style="text-decoration:none">Contribute to this documentation at 
          <span style="color:#fd360b"> Github!</span></a></span><br></div></body></html>