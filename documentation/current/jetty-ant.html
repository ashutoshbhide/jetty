<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Use Jetty with Ant</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><style type="text/css">
body { background-image: url('images/draft-ribbon.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><meta name="keywords" content="jetty, servlet-api, cometd, http, spdy, eclipse, maven, java, software"><link rel="home" href="index.html" title="Jetty : The Definitive Reference"><link rel="up" href="ant-and-jetty.html" title="Chapter&nbsp;18.&nbsp;Ant and Jetty"><link rel="prev" href="ant-and-jetty.html" title="Chapter&nbsp;18.&nbsp;Ant and Jetty"><link rel="next" href="setuid.html" title="Chapter&nbsp;19.&nbsp;Setuid"><link xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" rel="shortcut icon" href="images/favicon.ico"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><center xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-logo.svg" width="80"></a></center><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Use Jetty with Ant</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ant-and-jetty.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;18.&nbsp;Ant and Jetty</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="setuid.html">Next</a></td></tr></table><hr></div><div xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-variant: small-caps; font-weight: bold"><a href="http://www.webtide.com/support.jsp" style="text-decoration:none">Contact the core Jetty developers at
          <span style="color:#fd360b"> www.webtide.com</span></a></span><br><span style="font-style:oblique;font-size: 80%">
 private support for your internal/customer projects ... custom extensions and distributions ... versioned snapshots for indefinite support ...
 scalability guidance for your apps and Ajax/Comet projects ... development services from 1 day to full product delivery
    </span></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jetty-ant"></a>Use Jetty with Ant</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="jetty-ant.html#jetty-ant-preparation">Preparation</a></span></dt><dt><span class="section"><a href="jetty-ant.html#d0e7867">Preparing the <code class="filename">build.xml</code> file</a></span></dt><dt><span class="section"><a href="jetty-ant.html#d0e7890">Starting Jetty via Ant</a></span></dt><dt><span class="section"><a href="jetty-ant.html#d0e7897">Setting the Port</a></span></dt></dl></div><p>The Ant Jetty plugin is a part of Jetty 9 under the jetty-ant module. This plugin makes it possible to start a
  Jetty web server directly from the Ant build script, and to embed the Jetty web server inside your build process. Its
  purpose is to provide almost the same functionality as the Jetty plugin for Maven: dynamic application reloading,
  working directly on web application sources, and a tight integration with the build system.</p><div class="informalexample"><pre class="programlisting">
 
 <strong class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
   <strong class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.eclipse.jetty<strong class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
   <strong class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>jetty-ant<strong class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong>

    </pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jetty-ant-preparation"></a>Preparation</h3></div></div></div><p>You will need a jetty distribution and the jetty-ant jar in order to set up your project for ant to run
    jetty:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Get a jetty distribution and unpack it the local filesystem</li><li class="listitem">Get the jetty-ant jar</li><li class="listitem">Make a directory in your project called jetty-lib/</li><li class="listitem">Copy all of the jars in your jetty distribution's lib directory, and all its subdirectories, into your
      new jetty-lib dir. When copying the jars, DON'T preserve the jetty distro's lib dir hierarchy - all the jars
      should be directly inside your jetty-lib dir.</li><li class="listitem">Also copy the jetty-ant jar you downloaded earlier into the jetty-lib dir.</li><li class="listitem">Make a directory in your project called jetty-temp</li></ol></div><p>Now you're ready to edit or create your Ant <code class="filename">build.xml</code> file.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7867"></a>Preparing the <code class="filename">build.xml</code> file</h3></div></div></div><p>Let's start with an empty build.xml:</p><div class="informalexample"><pre class="programlisting">
 
<strong class="hl-tag" style="color: #000096">&lt;project</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"Jetty-Ant integration test"</span> <span class="hl-attribute" style="color: #F5844C">basedir</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/project&gt;</strong>

      </pre></div><p>Then, you must define a jetty task:</p><div class="informalexample"><pre class="programlisting">
 
<strong class="hl-tag" style="color: #000096">&lt;project</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"Jetty-Ant integration test"</span> <span class="hl-attribute" style="color: #F5844C">basedir</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;path</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
     <strong class="hl-tag" style="color: #000096">&lt;fileset</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"jetty-lib"</span> <span class="hl-attribute" style="color: #F5844C">includes</span>=<span class="hl-value" style="color: #993300">"*.jar"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/path&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;taskdef</strong> <span class="hl-attribute" style="color: #F5844C">classpathref</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span> <span class="hl-attribute" style="color: #F5844C">resource</span>=<span class="hl-value" style="color: #993300">"tasks.properties"</span> <span class="hl-attribute" style="color: #F5844C">loaderref</span>=<span class="hl-value" style="color: #993300">"jetty.loader"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/project&gt;</strong>

      </pre></div><p>Now you are ready to add a new target with Jetty container declaration:</p><div class="informalexample"><pre class="programlisting">
 
<strong class="hl-tag" style="color: #000096">&lt;project</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"Jetty-Ant integration test"</span> <span class="hl-attribute" style="color: #F5844C">basedir</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;path</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;fileset</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"jetty-lib"</span> <span class="hl-attribute" style="color: #F5844C">includes</span>=<span class="hl-value" style="color: #993300">"*.jar"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/path&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;taskdef</strong> <span class="hl-attribute" style="color: #F5844C">classpathref</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span> <span class="hl-attribute" style="color: #F5844C">resource</span>=<span class="hl-value" style="color: #993300">"tasks.properties"</span> <span class="hl-attribute" style="color: #F5844C">loaderref</span>=<span class="hl-value" style="color: #993300">"jetty.loader"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 
  <strong class="hl-tag" style="color: #000096">&lt;target</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"jetty.run"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;jetty /&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/target&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/project&gt;</strong>

      </pre></div><p>This is the minimal configuration need. You can now start jetty on the default port of 8080.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7890"></a>Starting Jetty via Ant</h3></div></div></div><p>At the command line do:</p><pre class="screen">
 
&gt; ant jetty.run

    </pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7897"></a>Setting the Port</h3></div></div></div><p>To configure the port that jetty will start up on you will need to define a connector. First you will need to
    configure a typedef for the Connector class and then define the connector in the jetty tags.</p><div class="informalexample"><pre class="programlisting">
 
<strong class="hl-tag" style="color: #000096">&lt;project</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"Jetty-Ant integration test"</span> <span class="hl-attribute" style="color: #F5844C">basedir</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;path</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;fileset</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"jetty-lib"</span> <span class="hl-attribute" style="color: #F5844C">includes</span>=<span class="hl-value" style="color: #993300">"*.jar"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/path&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;taskdef</strong> <span class="hl-attribute" style="color: #F5844C">classpathref</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span> <span class="hl-attribute" style="color: #F5844C">resource</span>=<span class="hl-value" style="color: #993300">"tasks.properties"</span> <span class="hl-attribute" style="color: #F5844C">loaderref</span>=<span class="hl-value" style="color: #993300">"jetty.loader"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 
  <strong class="hl-tag" style="color: #000096">&lt;typedef</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"connector"</span> <span class="hl-attribute" style="color: #F5844C">classname</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.ant.types.Connector"</span> 
    <span class="hl-attribute" style="color: #F5844C">classpathref</span>=<span class="hl-value" style="color: #993300">"jetty.plugin.classpath"</span> <span class="hl-attribute" style="color: #F5844C">loaderref</span>=<span class="hl-value" style="color: #993300">"jetty.loader"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>

  <strong class="hl-tag" style="color: #000096">&lt;target</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"jetty.run"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;jetty&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;connectors&gt;</strong>
        <strong class="hl-tag" style="color: #000096">&lt;connector</strong> <span class="hl-attribute" style="color: #F5844C">port</span>=<span class="hl-value" style="color: #993300">"8090"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;/connectors&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/jetty&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/target&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/project&gt;</strong>

      </pre></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>You can set the port to 0 which will start the jetty server connector up on an arbitrary available port. You
    can then access these values from system properties <span class="emphasis"><em>jetty.ant.server.port</em></span> and <span class="emphasis"><em>
    jetty.ant.server.host</em></span>.</div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ant-and-jetty.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ant-and-jetty.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="setuid.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;18.&nbsp;Ant and Jetty&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;19.&nbsp;Setuid</td></tr></table></div><div xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-style:oblique;font-size: 80%">
See an error or something missing?<br></span><span style="font-variant: small-caps; font-weight: bold"><a href="http://github.com/jetty-project/jetty-documentation" style="text-decoration:none">Contribute to this documentation at 
          <span style="color:#fd360b"> Github!</span></a></span><br></div></body></html>