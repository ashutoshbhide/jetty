<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Configuring Connectors</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="keywords" content="jetty, servlet-api, cometd, http, spdy, eclipse, maven, java, software"><link rel="home" href="index.html" title="Jetty : The Definitive Reference"><link rel="up" href="configuring.html" title="Chapter&nbsp;3.&nbsp;Configuration Options"><link rel="prev" href="setting-context-path-to-root.html" title="Setting Context Path to / (root)"><link rel="next" href="custom-error-pages.html" title="Creating Custom Error Pages"><link xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" rel="shortcut icon" href="images/favicon.ico"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><center xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-logo.svg" width="80"></a></center><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configuring Connectors</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="setting-context-path-to-root.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Configuration Options</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="custom-error-pages.html">Next</a></td></tr></table><hr></div><div xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-variant: small-caps; font-weight: bold"><a href="http://www.webtide.com/support.jsp" style="text-decoration:none">Contact the core Jetty developers at
          <span style="color:#fd360b"> www.webtide.com</span></a></span><br><span style="font-style:oblique;font-size: 80%">
 private support for your internal/customer projects ... custom extensions and distributions ... versioned snapshots for indefinite support ...
 scalability guidance for your apps and Ajax/Comet projects ... development services from 1 day to full product delivery
    </span></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-connectors"></a>Configuring Connectors</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="configuring-connectors.html#selectchannelconnector">SelectChannelConnector</a></span></dt><dt><span class="section"><a href="configuring-connectors.html#socketconnector">SocketConnector</a></span></dt><dt><span class="section"><a href="configuring-connectors.html#sslselectchannelconnector">SslSelectChannelConnector</a></span></dt><dt><span class="section"><a href="configuring-connectors.html#sslsocketconnector">SslSocketConnector</a></span></dt><dt><span class="section"><a href="configuring-connectors.html#ajp13socketconnector">Ajp13SocketConnector</a></span></dt><dt><span class="section"><a href="configuring-connectors.html#configuration-options">Configuration Options</a></span></dt></dl></div><p>As listed in the Contents above, Jetty provides several types of connectors that allow you to tailor the server
  setup to suit your circumstances.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="selectchannelconnector"></a>SelectChannelConnector</h3></div></div></div><p>This connector uses efficient NIO buffers with a non-blocking threading model. Jetty uses Direct NIO buffers,
    and allocates threads only to connections with requests. Synchronization simulates blocking for the servlet API,
    and any unflushed content at the end of request handling is written asynchronously. See the <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/nio/SelectChannelConnector.html" target="_top">javadoc</a>. This connector is best
    used when there are a many connections that have idle periods.</p><p>When used with [[Jetty/Feature/Continuations|Continuations]], //TODO xref// threadless waits are supported.
    When a filter or servlet calls <code class="code">getEvent</code> on a Continuation, a runtime exception is thrown to allow the
    thread to exit the current request handling. Jetty catches this exception and does not send a response to the
    client. Instead Jetty releases the thread and places the Continuation on the timer queue. If the Continuation
    timeout expires, or its resume method is called, then Jetty again allocates a thread to the request, and the
    request retries. The limitation of this approach is that request content is not available on the retried request,
    thus if possible it should be read after the Continuation or saved as a request attribute or as the associated
    object of the Continuation instance.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="socketconnector"></a>SocketConnector</h3></div></div></div><p>This connector implements a traditional blocking IO and threading model. Jetty uses Normal JRE sockets and
    allocates a thread per connection. Jetty allocates large buffers to active connections only. You should use this
    Connector only if NIO is not available. See the <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/bio/SocketConnector.html" target="_top">javadoc</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sslselectchannelconnector"></a>SslSelectChannelConnector</h3></div></div></div><p>This is an SSL connector that uses NIO. For more information about its configuration, see
    [[Jetty/Reference/SSL Connectors|SSL Connector Reference]]. //TODO xref//See also the <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/ssl/SslSelectChannelConnector.html" target="_top">javadoc</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sslsocketconnector"></a>SslSocketConnector</h3></div></div></div><p>This is a blocking IO connector that supports SSL. See the <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/ssl/SslSocketConnector.html" target="_top">javadoc</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ajp13socketconnector"></a>Ajp13SocketConnector</h3></div></div></div><p>This connector implements the AJP13 protocol. See [[Jetty/Howto/Configure AJP13|How to Configure Ajp13]]
    //TODO xref//for more information, and also take a look at [[JETTY/Howto/Configure mod_proxy|How to Configure
    mod_proxy]] //TODOxref// for alternatives to using the AJP13 protocol. See also the <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/ajp/Ajp13SocketConnector.html" target="_top">javadoc</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-options"></a>Configuration Options</h3></div></div></div>You can fine tune your connector configuration using the following parameters. 
  <div class="table"><a name="d0e1077"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;Connector Configuration Parameters</b></p><div class="table-contents"><table summary="Connector Configuration Parameters" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">Parameter</th><th align="left">Description</th></tr></thead><tbody><tr><td>acceptors</td><td>The number of threads dedicated to accepting incoming connections.</td></tr><tr><td>acceptQueueSize</td><td>Number of connection requests that can be queued up before the operating system starts to send
          rejections.</td></tr><tr><td>acceptorPriority</td><td>Sets the priority of the acceptor threads relative to the other threads.</td></tr><tr><td>confidentialPort</td><td>The port to redirect to if there is a security constraint of CONFIDENTIAL.</td></tr><tr><td>confidentialScheme</td><td>https by default</td></tr><tr><td>forwarded</td><td>If true use 
          <span style="color: red">&lt;tt&gt;hostHeader&lt;/tt&gt;</span>or else check the headers for retrieving information from the original request to control
          what 
          <span style="color: red">&lt;tt&gt;ServletRequest#getServerName()&lt;/tt&gt;</span>and 
          <span style="color: red">&lt;tt&gt;ServletRequest#getServerPort()&lt;/tt&gt;</span>and 
          <span style="color: red">&lt;tt&gt;ServletRequest#getRemoteAddr()&lt;/tt&gt;</span>return. Default is false. See [[Jetty/Howto/Configure mod_proxy|How to
          Configure mod_proxy]].</td></tr><tr><td>forwardedHostHeader</td><td>The forwarded 
          <span style="color: red">&lt;tt&gt;Host&lt;/tt&gt;</span>header to use. Default is 
          <span style="color: red">&lt;tt&gt;X-Forwarded-Host&lt;/tt&gt;</span>. This value is used only if 
          <span style="color: red">&lt;tt&gt;forwarded&lt;/tt&gt;</span>is true.</td></tr><tr><td>forwardedServerHeader</td><td>The forwarded server name header to use. Default is 
          <span style="color: red">&lt;tt&gt;X-Forwarded-Server&lt;/tt&gt;</span>. This value is used only if 
          <span style="color: red">&lt;tt&gt;forwarded&lt;/tt&gt;</span>is true.</td></tr><tr><td>forwardedForHeader</td><td>The forwarded for header to use. Default is 
          <span style="color: red">&lt;tt&gt;X-Forwarded-For&lt;/tt&gt;</span>. This value is used only if 
          <span style="color: red">&lt;tt&gt;forwarded&lt;/tt&gt;</span>is true.</td></tr><tr><td>headerBufferSize</td><td>Sets the size of the buffer for request and response headers. An idle connection at most has one
          buffer of this size allocated. Default is 4K.</td></tr><tr><td>hostHeader</td><td>Set a forced valued for the 
          <span style="color: red">&lt;tt&gt;Host&lt;/tt&gt;</span>header to control what 
          <span style="color: red">&lt;tt&gt;ServletRequest#getServerName()&lt;/tt&gt;</span>and 
          <span style="color: red">&lt;tt&gt;ServletRequest#getServerPort()&lt;/tt&gt;</span>return. This value is used only if 
          <span style="color: red">&lt;tt&gt;forwarded&lt;/tt&gt;</span>is true.</td></tr><tr><td>host</td><td>The particular interface to listen on. If not set or 0.0.0.0, Jetty listens on 
          <span style="color: red">&lt;tt&gt;port&lt;/tt&gt;</span>on all interfaces.</td></tr><tr><td>integralPort</td><td>The port to redirect to if there is a security constraint of INTEGRAL.</td></tr><tr><td>lowResourcesConnections</td><td>Sets the number of connections, which if exceeded places this connector in a low resources state. This
          is not an exact measure as the connection count is averaged over the select sets. When in a low resources
          state, different idle timeouts can apply on connections. See 
          <span style="color: red">&lt;tt&gt;lowResourcesMaxIdleTime&lt;/tt&gt;</span>.</td></tr><tr><td>lowResourcesMaxIdleTime</td><td>Sets the period in ms that a connection is allowed to be idle when this there are more than 
          <span style="color: red">&lt;tt&gt;lowResourcesConnections&lt;/tt&gt;</span>connections. This allows the server to rapidly close idle connections in
          order to gracefully handle high load situations.</td></tr><tr><td>maxIdleTime</td><td>Set the maximum Idle time for a connection, which roughly translates to the Socket.setSoTimeout(int)
          call, although with NIO implementations other mechanisms may be used to implement the timeout. The max idle
          time is applied: when waiting for a new request to be received on a connection; when reading the headers and
          content of a request; when writing the headers and content of a response. Jetty interprets this value as the
          maximum time between some progress being made on the connection. So if a single byte is read or written, then
          the timeout (if implemented by Jetty) is reset. However, in many instances, the reading/writing is delegated
          to the JVM, and the semantic is more strictly enforced as the maximum time a single read/write operation can
          take. Note that as Jetty supports writes of memory-mapped file buffers, a write may take many 10s of seconds
          for large content written to a slow device.</td></tr><tr><td>name</td><td>The name of the connector. Can be used to make a WebAppContext respond only to requests on the named
          connector via the 
          <span style="color: red">&lt;tt&gt;WebAppContext.setConnectorNames(String[])&lt;/tt&gt;</span>method</td></tr><tr><td>port</td><td>The port to listen on. See also 
          <span style="color: red">&lt;tt&gt;host&lt;/tt&gt;</span>.</td></tr><tr><td>requestBufferSize</td><td>Sets the size of the content buffer for receiving requests. These buffers are used only for active
          connections that have requests with bodies that do not fit within the header buffer (see 
          <span style="color: red">&lt;tt&gt;headerBufferSize&lt;/tt&gt;</span>). Default is 8K.</td></tr><tr><td>responseBufferSize</td><td>Sets the size of the content buffer for sending responses. These buffers are used only for active
          connections that are sending responses with bodies that will not fit within the header buffer. Default is
          32K.</td></tr><tr><td>resolveNames</td><td>If true, request IP addresses will be resolved to host names.</td></tr><tr><td>reuseAddress</td><td>True if the the server socket will be opened in SO_REUSEADDR mode.</td></tr><tr><td>soLingerTime</td><td>Sets SO_LINGER on the connection socket. Disabled by default.</td></tr><tr><td>statsOn</td><td>If true, enables statistics collection on connections. See
          [[Jetty/Feature/Statistics|Statistics]].</td></tr><tr><td>useDirectBuffers</td><td>For nio connectors, determines whether direct byte buffers will be used or not. The default is
          true.</td></tr><tr><td>threadPool</td><td>Sets the thread pool instance. By default this is the thread pool set on the
          org.eclipse.jetty.server.Server instance, and is a org.eclipse.jetty.util.thread.QueuedThreadPool
          instance.</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="setting-context-path-to-root.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="configuring.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="custom-error-pages.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Setting Context Path to / (root)&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Creating Custom Error Pages</td></tr></table></div><div xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-style:oblique;font-size: 80%">
See an error or something missing?<br></span><span style="font-variant: small-caps; font-weight: bold"><a href="http://github.com/jetty-project/jetty-documentation" style="text-decoration:none">Contribute to this documentation at 
          <span style="color:#fd360b"> Github!</span></a></span><br></div></body></html>