<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;Quick Start Configuration</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="keywords" content="jetty, servlet-api, cometd, http, spdy, eclipse, maven, java, software"><link rel="home" href="index.html" title="Jetty : The Definitive Reference"><link rel="up" href="quick-start.html" title="Part&nbsp;I.&nbsp;Quick Start Guide"><link rel="prev" href="intro-running-jetty.html" title="Running Jetty"><link rel="next" href="configuring.html" title="Part&nbsp;II.&nbsp;Jetty Configuration Guide"><link xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" rel="shortcut icon" href="images/favicon.ico"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><center xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"><a href="http://www.eclipse.org/jetty"><img src="images/jetty-logo.svg" width="80"></a></center><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Quick Start Configuration</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="intro-running-jetty.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;I.&nbsp;Quick Start Guide</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="configuring.html">Next</a></td></tr></table><hr></div><div xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-variant: small-caps; font-weight: bold"><a href="http://www.webtide.com/support.jsp" style="text-decoration:none">Contact the core Jetty developers at
          <span style="color:#fd360b"> www.webtide.com</span></a></span><br><span style="font-style:oblique;font-size: 80%">
 private support for your internal/customer projects ... custom extensions and distributions ... versioned snapshots for indefinite support ...
 scalability guidance for your apps and Ajax/Comet projects ... development services from 1 day to full product delivery
    </span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="quick-start-configure"></a>Chapter&nbsp;3.&nbsp;Quick Start Configuration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="quick-start-configure.html#configuring-jetty-intro">Introduction to Jetty Configuration</a></span></dt></dl></div>&szlig; 
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-jetty-intro"></a>Introduction to Jetty Configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="quick-start-configure.html#how-to-configure-jetty-intro">How to Configure Jetty</a></span></dt><dt><span class="section"><a href="quick-start-configure.html#d0e735">What to Configure in Jetty</a></span></dt></dl></div><p>To understand Jetty Configuration, you need to understand the "How" - what configuration mechanisms exist; and
  "What" the actual objects and fields that can be configured with those mechanisms.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="how-to-configure-jetty-intro"></a>How to Configure Jetty</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e632"></a>Jetty POJO Configuration</h4></div></div></div><p>The main components of Jetty are simply Plain Old Java Objects ( <a class="link" href="http://en.wikipedia.org/wiki/Plain_Old_Java_Object" target="_top">POJOs</a>) and the process of configuring jetty
      can be considered mostly as the process of instantiating, assembling and setting fields on the Jetty POJOs. This
      can be achieved either by:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Writing java code to directly instantiate and assemble Jetty objects. This is referred to as <a class="xref" href="">???</a>Jetty.</p></li><li class="listitem"><p>Using Jetty XML Configuration, which is a <a class="link" href="http://en.wikipedia.org/wiki/Inversion_of_Control" target="_top">Inversion of Control (IoC)</a> framework, to
          instantiate and assemble Jetty object as XML objects</p></li><li class="listitem"><p>Using a third party <a class="link" href="http://en.wikipedia.org/wiki/Inversion_of_Control" target="_top">
          IoC</a> framework like <a class="link" href="http://en.wikipedia.org/wiki/Spring_Framework" target="_top">Spring</a>, to
          instantiate and assemble Jetty objects as spring beans.</p></li></ul></div><p>Because the main Jetty configuration is done by IoC, it is the <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/" target="_top">Jetty API documentation</a> that is the ultimate
      configuration reference.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e666"></a>Other Configuration Files</h4></div></div></div><p>Some Jetty Components do have configuration files that are not IoC</p><div class="variablelist"><dl><dt><span class="term">web.xml</span></dt><dd><p>The <a class="link" href="???" target="_top">Servlet</a> Specification defines the <a class="link" href="http://en.wikipedia.org/wiki/Web.xml" target="_top">web.xml</a> deployment descriptor that defines and
            configures the Filters, Servlets and resources used by a <a class="link" href="http://en.wikipedia.org/wiki/Web_application" target="_top">Web Application</a>. The Jetty WebAppContext
            component uses this XML format to:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>set up the default configuration of a web application context</p></li><li class="listitem"><p>interpret the application specific configuration supplied with a web application in the
                WEB-INF/web.xml file</p></li><li class="listitem"><p>interpret descriptor fragments included in the META-INF directory of jar files within
                WEB-INF/lib</p></li></ul></div></dd><dt><span class="term">Property Files</span></dt><dd><p>Standard <a class="link" href="http://en.wikipedia.org/wiki/Java_properties" target="_top">java property files</a> are
            also used for jetty configuration in several ways:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>to parameterize Jetty IoC XML via the use of the Property element</p></li><li class="listitem"><p>to configure the default logging mechanism (StdErrLog). Other logging frameworks may also be
                plugged into jetty and also use property files (eg log4j)</p></li><li class="listitem"><p>as a simple database for login usernames and credentials</p></li></ul></div></dd><dt><span class="term">Start.ini</span></dt><dd><p>The Jetty start mechanism uses a ini file to hold command line arguments that would otherwise have to
            be passed to the command to start Jetty.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e722"></a>Example Jetty Configuration</h4></div></div></div><p>An example of a Jetty server assembled and configured in embedded style is:</p><pre class="programlisting"><strong class="hl-keyword">public</strong> <strong class="hl-keyword">class</strong> ExampleServer { <strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">void</strong> main(String[] args) <strong class="hl-keyword">throws</strong>
      Exception { Server server = <strong class="hl-keyword">new</strong> Server(); ServerConnector connector=<strong class="hl-keyword">new</strong> ServerConnector(server);
      connector.setPort(<span class="hl-number">8080</span>); server.setConnectors(<strong class="hl-keyword">new</strong> Connector[]{connector}); ServletContextHandler context = <strong class="hl-keyword">new</strong>
      ServletContextHandler(); context.setContextPath(<strong class="hl-string"><em style="color:red">"/hello"</em></strong>); context.addServlet(HelloServlet.<strong class="hl-keyword">class</strong>,<strong class="hl-string"><em style="color:red">"/"</em></strong>);
      HandlerCollection handlers = <strong class="hl-keyword">new</strong> HandlerCollection(); handlers.setHandlers(<strong class="hl-keyword">new</strong> Handler[]{context,<strong class="hl-keyword">new</strong>
      DefaultHandler()}); server.setHandler(handlers); server.start(); server.join(); } }</pre><p>The exact same server configuration can be achieve with the Jetty XML file:</p><pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?xml version="1.0"?&gt;</span> <strong class="hl-tag" style="color: blue">&lt;!DOCTYPE Configure PUBLIC
      "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd"&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Configure</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"ExampleServer"</span>
      <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.Server"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"connectors"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Array</strong>
      <span class="hl-attribute" style="color: #F5844C">type</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.Connector"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Item&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;New</strong>
      <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.ServerConnector"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Arg&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;Ref</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"ExampleServer"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;/Arg&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"port"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>8080<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/New&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Item&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Array&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;New</strong>
      <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"context"</span> <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.servlet.ServletContextHandler"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Set</strong>
      <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"contextPath"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>/hello<strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Call</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"addServlet"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;Arg&gt;</strong>org.eclipse.jetty.embedded.HelloServlet<strong class="hl-tag" style="color: #000096">&lt;/Arg&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Arg&gt;</strong>/<strong class="hl-tag" style="color: #000096">&lt;/Arg&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Call&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;/New&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"handler"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;New</strong> <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.handler.HandlerCollection"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;Set</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"handlers"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Array</strong> <span class="hl-attribute" style="color: #F5844C">type</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.Handler"</span><strong class="hl-tag" style="color: #000096">&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Item&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Ref</strong>
      <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"context"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Item&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;Item&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;New</strong> <span class="hl-attribute" style="color: #F5844C">class</span>=<span class="hl-value" style="color: #993300">"org.eclipse.jetty.server.handler.DefaultHandler"</span><strong class="hl-tag" style="color: #000096">
      /&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Item&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Array&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/New&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Set&gt;</strong> <strong class="hl-tag" style="color: #000096">&lt;/Configure&gt;</strong></pre><p>In practise, most commonly used Jetty features have had xml files created for them that are included in the
      standard distribution in the etc directory. Thus configuring Jetty is often a matter of just editing the existing
      XML files and altering the configuration values within them.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e735"></a>What to Configure in Jetty</h3></div></div></div><p>This section gives an overview of the what components of Jetty typically configured using the mechanisms
    outline in the previous section. The structure of a Jetty server is described in <a class="xref" href="basic-architecture.html" title="Jetty 7 Architecture">Jetty 7 Architecture</a>which is good background reading to understand configuration and is vital to if you
    wish to change the structure of the server as set up by the default configurations in the jetty distribution.
    However, for most purposes, configuration is a matter of identifying the correct configuration file and modifying
    existing configuration values.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e742"></a>Configuring the Server</h4></div></div></div><p>The Server instance is the central coordination object of a Jetty server and it provides services and life
      cycle management for all other jetty server components. In the standard jetty distribution by the core server
      configuration is in etc/jetty.xml file, but other server configuration may be mixed in (see below). Server
      configuration can include:</p><div class="variablelist"><dl><dt><span class="term">ThreadPool</span></dt><dd><p>The Server instance provides a ThreadPool instance that is the default Executor service used by other
            Jetty server components. The prime configuration of the thread pool is the maximum and minimum size and is
            set in etc/jetty.xml</p></dd><dt><span class="term">Handlers</span></dt><dd><p>A Jetty Server can have only a single Handler instance to handle incoming HTTP requests. However a
            Handler may be a container or wrapper of other handlers forming a tree of handlers that typically handle a
            request request as a collaboration between the handlers from the a branch of the tree from root to leaf.
            The default handler tree set up in the etc/jetty.xml file is a Handler Collection containing a Context
            Handler Collection and the Default Handler. The Context Handler Collection selects the next handler by
            context path and is where deployed Context Handler and Web Application Contexts are added to the handler
            tree. The Default Handler handles any requests not already handled and generates the standard 404 page.
            Other configuration files may add handlers to this tree (eg jetty-rewrite.xml, jetty-requestlog.xml ) or
            configure components to hot deploy handlers (eg jetty-deploy.xml).</p></dd><dt><span class="term">Server Attributes</span></dt><dd><p>The server holds a generic attribute map of Strings to Objects so that other jetty components may
            associated named objects with the server and if the value objects implement the LifeCycle interface then
            they are started and stopped with the server. Typically server attributes are used for holding server-wide
            default values.</p></dd><dt><span class="term">Server fields</span></dt><dd><p>The server also has some specific configuration fields that are set in etc/jetty.xml for controlling
            among other things, the sending of Dates and Versions in HTTP responses.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e772"></a>Configuring Connectors</h4></div></div></div><p>A Jetty Server Connector is a network end point that accepts connections for one or more protocols that can
      produce request and/or messages for the jetty server. In the standard Jetty Server distribution, there are
      several configuration files provided that add connectors to the server for various protocols and combinations of
      protocols: jetty-http.xml, jetty-https.xml and jetty-spdy.xml. The configuration needed for connectors is
      typically:</p><div class="variablelist"><dl><dt><span class="term">port</span></dt><dd><p>The TCP/IP port on which the connector listens for connections is set using the the XML Property
            element which looks up the jetty.port (or jetty.tls.port) property and if not found defaults to 8080 (or
            8443 for TLS).</p></dd><dt><span class="term">host</span></dt><dd><p>A host may be configured either as a host name or IP address to identify a specific network interface
            on which to listen. If not set, or set to the value of 0.0.0.0, then all local interfaces are listened on.
            The XML Property element is used to look up the host value from the jetty.host property.</p></dd><dt><span class="term">Idle Timeout</span></dt><dd><p>This is the time in milliseconds that a connection is allowed to be idle before the connector will
            take actions to close the connection.</p></dd><dt><span class="term">HTTP Configuration</span></dt><dd><p>Connector types that accept HTTP semantics (including HTTP, HTTPS and SPDY) are configured with a
            HttpConfiguration instance that contains common HTTP configuration that is independent of the specific wire
            protocol used. Because these values are often common to multiple connector types, the standard Jetty Server
            distribution creates a single HttpConfiguration in the jetty.xml file which is used via the XML Ref element
            in the specific connector files.</p></dd><dt><span class="term">SSL Context Factory</span></dt><dd><p>The TLS connector types (HTTPS and SPDY) configure an SSL Context Factory with the location of the
            server keystore and truststore for obtaining server certificates.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Virtual Hosts are not configured on Connectors. Individual Contexts must be configured with the virtual
        hosts to which they respond.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Prior to Jetty-9, the type of the connector was chosen to reflect both the protocol supported (e.g. HTTP,
        HTTPS, AJP, SPDY) and the nature of the implementation (e.g. NIO or BIO). From Jetty-9 onwards there is only
        one prime Connector type (ServerConnector), which is NIO based and uses Connection Factories to be able to
        handle one or more protocols.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e814"></a>Configuring the Deployer</h4></div></div></div><p>The Jetty deployer is a service object that scans a directory for contexts and web applications to hot
      deploy (see <a class="link" href="intro-running-jetty.html#quickstart-deploying-webapps">quickstart</a>). A context is an instance of
      ContextHandler that aggregates other handlers with common resources for handling HTTP requests (eg resource base,
      class loader, configuration attributes). A standard Web Application is a specialized instance of a Context that
      uses standard layouts and web.xml deployment descriptors to configure the context.</p><p>In the standard Jetty distribution the deployer is configured by jetty-deploy.xml and scans the webapps
      directory.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e824"></a>Configuring Contexts</h4></div></div></div><p></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e828"></a>Configuring Web Applications</h4></div></div></div><p></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e832"></a>Configuring Other</h4></div></div></div><p></p></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="intro-running-jetty.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="quick-start.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="configuring.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Running Jetty&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;II.&nbsp;Jetty Configuration Guide</td></tr></table></div><div xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" style="background-color: #DFF2FD; text-align: left; font-size:80%; font-family: arial, sans; border:thin dotted blue; padding: 4px; "><span style="font-style:oblique;font-size: 80%">
See an error or something missing?<br></span><span style="font-variant: small-caps; font-weight: bold"><a href="http://github.com/jetty-project/jetty-documentation" style="text-decoration:none">Contribute to this documentation at 
          <span style="color:#fd360b"> Github!</span></a></span><br></div></body></html>